<UserControl x:Class="BDC_V1.Views.InspectionView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             prism:ViewModelLocator.AutoWireViewModel="True"
             xmlns:diagnostics="clr-namespace:System.Diagnostics;assembly=WindowsBase"
             xmlns:utils="clr-namespace:BDC_V1.Utils"
             xmlns:converters="clr-namespace:BDC_V1.Converters"
             mc:Ignorable="d"
             MaxHeight="750" MaxWidth="875"
             d:DesignHeight="750" d:DesignWidth="875">

  <i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
      <i:InvokeCommandAction Command="{Binding ViewActivated}" />
    </i:EventTrigger>
  </i:Interaction.Triggers>

  <UserControl.Resources>
    <Style x:Key="FacilityBlockButtonStyle" TargetType="Button" 
           BasedOn="{StaticResource ImageClickBlockButtonStyle}">
      <Setter Property="Height" Value="95" />
      <Setter Property="Width" Value="160" />
      <Setter Property="Margin" Value="5,5,5,0" />
    </Style>

    <!-- Offset needed to visually center the image -->
    <Style x:Key="ImageClickBlockCommentImageStyle" TargetType="Image" 
           BasedOn="{StaticResource ImageClickBlockImageStyle}">
      <Setter Property="Margin" Value="5,0,0,0" />
    </Style>

    <Style x:Key="PhotosBlockButtonStyle" TargetType="Button" 
           BasedOn="{StaticResource ImageClickBlockButtonStyle}">
      <Setter Property="Width" Value="160" />
    </Style>

    <Style x:Key="btnStatusBase"
        TargetType="Button"
        BasedOn="{StaticResource MaterialDesignRaisedLightButton}">
      <Setter Property="Margin" Value="5" />
    </Style>

    <Style x:Key="btnGreenStatus"
       TargetType="Button"
       BasedOn="{StaticResource btnStatusBase}">
      <Setter Property="Foreground"
        Value="Green" />
    </Style>

    <Style x:Key="btnAmberStatus"
       TargetType="Button"
       BasedOn="{StaticResource btnStatusBase}">
      <Setter Property="Foreground"
        Value="#FFBF00" />
    </Style>

    <Style x:Key="btnRedStatus"
       TargetType="Button"
       BasedOn="{StaticResource btnStatusBase}">
      <Setter Property="Foreground"
        Value="Red" />
    </Style>
  </UserControl.Resources>

  <ScrollViewer HorizontalScrollBarVisibility="Auto"
                VerticalScrollBarVisibility="Auto">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="5"    /> <!--  0 - white space at top -->
        <RowDefinition Height="38" /> <!--  1 - Component -->
        <RowDefinition Height="38" /> <!--  2 - Equip/Mat -->
        <RowDefinition Height="38" /> <!--  3 - Component Type -->
        <RowDefinition Height="38" /> <!--  4 - Section Quantity -->
        <RowDefinition Height="38" /> <!--  5 - Inspection Date -->
        <RowDefinition Height="170"  /> <!--  6 - Painted & Direct -->
        <RowDefinition Height="100"  /> <!--  7 - Inspection Comment -->
        <RowDefinition Height="10"   /> <!--  8 - white space -->
        <RowDefinition Height="55" /> <!--  9 - Remember -->
        <RowDefinition Height="10"   /> <!-- 10 - white space -->
        <RowDefinition Height="128" /> <!-- 11 - Inspection Photos -->
        <RowDefinition Height="10"   /> <!-- 12 - white space -->
        <RowDefinition Height="60" /> <!-- 13 - Action Buttons -->
        <RowDefinition Height="5"    /> <!-- 14 - white space at bottom -->
      </Grid.RowDefinitions>

      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="170" />
        <ColumnDefinition Width="120" />
        <ColumnDefinition Width="80"  />
        <ColumnDefinition Width="80"  />
        <ColumnDefinition Width="80"  />
        <ColumnDefinition Width="80"  />
        <ColumnDefinition Width="80"  />
        <ColumnDefinition Width="80"  />
        <ColumnDefinition Width="80"  />
        <ColumnDefinition Width="5"   /> <!-- Make room for the scroll bar -->
      </Grid.ColumnDefinitions>

      <!-- -->
      <Label
          Grid.Row="1" Grid.Column="0"
          Content="Component:"
          Style="{StaticResource LabelRJ}"/>
      <Label
          Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="4"
          Content="{Binding InspectionInfo.Component}"
          Style="{StaticResource LabelRO}"
                />
      <Label
          Grid.Row="1" Grid.Column="5"
          Content="Section:"
          Style="{StaticResource LabelRJ}"
                />
      <Label
          Grid.Row="1" Grid.Column="6" Grid.ColumnSpan="3"
          Content="{Binding InspectionInfo.Section}"
          Style="{StaticResource LabelRO}"
                />

      <!-- Equip / Mat Category -->
      <Label
          Grid.Row="2" Grid.Column="0"
          Content="Equip./Mat. Category:"
          Style="{StaticResource LabelRJ}"
                />
      <Label
          Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="8"
          Content="{Binding InspectionInfo.Category}"
          Style="{StaticResource LabelRO}"/>

      <!-- Component Type -->
      <Label
          Grid.Row="3" Grid.Column="0"
          Content="Component Type:"
          Style="{StaticResource LabelRJ}"
                />
      <Label
          Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="8"
          Content="{Binding InspectionInfo.ComponentType}"
          Style="{StaticResource LabelRO}"/>

      <!-- Section Quantity -->
      <Label
          Grid.Row="4" Grid.Column="0"
          Content="Section Quantity:"
          Style="{StaticResource LabelRJ}"/>
      <Label
          Grid.Row="4" Grid.Column="1"
          Content="{Binding InspectionInfo.Quantity}"
          ContentStringFormat="{}{0:#,#.00}"
          Style="{StaticResource LabelRO}"/>
      <Label
          Grid.Row="4" Grid.Column="2"
          Content="MBH"
          Style="{StaticResource LabelLJ}"/>

      <!-- Inspection Date -->
      <Label
          Grid.Row="5" Grid.Column="0"
          Content="Inspection Date:"
          Style="{StaticResource LabelRJ}"/>
      <DatePicker
          Grid.Row="5" Grid.Column="1"
          Text="{Binding InspectionInfo.InspectionDate, StringFormat=d}" />

      <StackPanel
          Grid.Row="5" Grid.Column="4" Grid.ColumnSpan="6"
          Orientation="Horizontal">
        <StackPanel.Resources>
          <converters:EnumBooleanConverter x:Key="EnumBooleanConverter" />
        </StackPanel.Resources>

        <Label
            Content="Inspection Type"
            Style="{StaticResource LabelRJ}"/>
        <RadioButton
            Content="Direct Rating"
            GroupName="InspectionType"
            Margin="20 0 0 0"
            VerticalContentAlignment="Center"
            IsChecked="{Binding Path=InspectionInfo.InspectionType, 
                            Converter={StaticResource ResourceKey=EnumBooleanConverter}, 
                            ConverterParameter=DirectRating,
                            Mode=TwoWay}" />
        <RadioButton
            Margin="20 0 0 0"
            GroupName="InspectionType"
            Content="Distress Survey"
            VerticalContentAlignment="Center"
            IsChecked="{Binding Path=InspectionInfo.InspectionType, 
                            Converter={StaticResource ResourceKey=EnumBooleanConverter}, 
                            ConverterParameter=DistressSurvey,
                            Mode=TwoWay}" />
      </StackPanel>

      <!-- Painted & Direct -->
      <Grid Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="9">
        <Grid.RowDefinitions>
          <RowDefinition Height="*" />
          <RowDefinition Height="*" />
          <RowDefinition Height="*" />
          <RowDefinition Height="*" />
          <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="170" />
          <ColumnDefinition Width="100"/>
          <ColumnDefinition Width="90"/>
          <ColumnDefinition Width="80"/>
          <ColumnDefinition Width="50"/>
          <ColumnDefinition Width="100"/>
          <ColumnDefinition Width="90"/>
          <ColumnDefinition Width="80"/>
          <ColumnDefinition Width="25"/>
        </Grid.ColumnDefinitions>

        <!--Background for some cells-->
        <Border
            Grid.Row="0" Grid.Column="5" Grid.ColumnSpan="3"
            Background="LightBlue" />
        <Border
            Grid.Row="0" Grid.RowSpan="4"  Grid.Column="4" Grid.ColumnSpan="5"
            Margin="25,0,0,0"
            Background="LightBlue" 
          />

        <!--Row 0-->
        <Label
            Grid.Row="0" Grid.Column="0"
            Content="Painted/Coated:"
            Style="{StaticResource LabelRJ}"
                    />
        <CheckBox
            Grid.Row="0" Grid.Column="1"
            Name="CheckboxPainted"
            VerticalContentAlignment="Center"
            Content="                  "
            IsChecked="{Binding IsPainted}"
            Style="{StaticResource cbBase}"
                    />
        <Label
            Grid.Row="0" Grid.Column="4" Grid.ColumnSpan="4"
            Content="Paint/Coating Condition Rating:"
            Margin="25,0,0,0"
          HorizontalContentAlignment="Left"
            Style="{StaticResource LabelCJ}"
                    />

        <!--Row 1-->
        <Label
            Grid.Row="1" Grid.Column="0"
            Content="Direct Condition Rating:"
            Style="{StaticResource LabelRJ}"
                    />

        <Button
            Grid.Row="1" Grid.Column="1"
            Content="Green+"
            Command="{Binding CmdCondRating}"
            Style="{StaticResource btnGreenStatus}"
                    >
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Green</system:String>
              <system:String>0</system:String>
              <system:String>0</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="1" Grid.Column="2"
            Content="Amber+"
            Style="{StaticResource btnAmberStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Amber</system:String>
              <system:String>0</system:String>
              <system:String>0</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="1" Grid.Column="3"
            Content="Red+"
            Style="{StaticResource btnRedStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Red</system:String>
              <system:String>0</system:String>
              <system:String>0</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="1" Grid.Column="5"
            Content="Green+"
            IsEnabled="{Binding ElementName=CheckboxPainted, Path=IsChecked}"
            Style="{StaticResource btnGreenStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Green</system:String>
              <system:String>1</system:String>
              <system:String>0</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="1" Grid.Column="6"
            Content="Amber+"
            IsEnabled="{Binding ElementName=CheckboxPainted, Path=IsChecked}"
            Style="{StaticResource btnAmberStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Amber</system:String>
              <system:String>1</system:String>
              <system:String>0</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="1" Grid.Column="7"
            Content="Red+"
            IsEnabled="{Binding ElementName=CheckboxPainted, Path=IsChecked}"
            Style="{StaticResource btnRedStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Red</system:String>
              <system:String>1</system:String>
              <system:String>0</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>

        <Button
            Grid.Row="2" Grid.Column="1"
            Content="Green+"
            Style="{StaticResource btnGreenStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Green</system:String>
              <system:String>0</system:String>
              <system:String>1</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="2" Grid.Column="2"
            Content="Amber+"
            Style="{StaticResource btnAmberStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Amber</system:String>
              <system:String>0</system:String>
              <system:String>1</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="2" Grid.Column="3"
            Content="Red+"
            Style="{StaticResource btnRedStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Red</system:String>
              <system:String>0</system:String>
              <system:String>1</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="2" Grid.Column="5"
            Content="Green+"
            IsEnabled="{Binding ElementName=CheckboxPainted, Path=IsChecked}"
            Style="{StaticResource btnGreenStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Green</system:String>
              <system:String>1</system:String>
              <system:String>1</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="2" Grid.Column="6"
            Content="Amber+"
            IsEnabled="{Binding ElementName=CheckboxPainted, Path=IsChecked}"
            Style="{StaticResource btnAmberStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Amber</system:String>
              <system:String>1</system:String>
              <system:String>1</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="2" Grid.Column="7"
            Content="Red+"
            IsEnabled="{Binding ElementName=CheckboxPainted, Path=IsChecked}"
            Style="{StaticResource btnRedStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Red</system:String>
              <system:String>1</system:String>
              <system:String>1</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>

        <Button
            Grid.Row="3" Grid.Column="1"
            Content="Green+"
            Style="{StaticResource btnGreenStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Green</system:String>
              <system:String>0</system:String>
              <system:String>2</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="3" Grid.Column="2"
        Content="Amber+"
        Style="{StaticResource btnAmberStatus}"
        Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Amber</system:String>
              <system:String>0</system:String>
              <system:String>2</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="3" Grid.Column="3"
            Content="Red+"
            Style="{StaticResource btnRedStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Red</system:String>
              <system:String>0</system:String>
              <system:String>2</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="3" Grid.Column="5"
            Content="Green+"
            IsEnabled="{Binding ElementName=CheckboxPainted, Path=IsChecked}"
            Style="{StaticResource btnGreenStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Green</system:String>
              <system:String>1</system:String>
              <system:String>2</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="3" Grid.Column="6"
            Content="Amber+"
            IsEnabled="{Binding ElementName=CheckboxPainted, Path=IsChecked}"
            Style="{StaticResource btnAmberStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Amber</system:String>
              <system:String>1</system:String>
              <system:String>2</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>
        <Button
            Grid.Row="3" Grid.Column="7"
            Content="Red+"
            IsEnabled="{Binding ElementName=CheckboxPainted, Path=IsChecked}"
            Style="{StaticResource btnRedStatus}"
            Command="{Binding CmdCondRating}">
          <Button.CommandParameter>
            <x:Array Type="system:Object">
              <system:String>Red</system:String>
              <system:String>1</system:String>
              <system:String>2</system:String>
            </x:Array>
          </Button.CommandParameter>
        </Button>

        <!--Content="{Binding InspectionInfo.Note}"-->
        <Label
            Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="8"
            Background="Orange"
            Content="Note: Inspection Comment &amp; Photo required."
            Style="{StaticResource LabelRO}"/>
      </Grid>

      <!-- Inspection Comment -->
      <Button Grid.Row="7" Grid.Column="0"
              Style="{DynamicResource FacilityBlockButtonStyle}"
              Command="{Binding CmdInspectionComment}">
        <StackPanel Style="{StaticResource ImageClickBlockPanelStyle}">
          <Image Source="/BDC_V1;component/Resources/EditText_Comments (1).png"
                 Style="{StaticResource ImageClickBlockCommentImageStyle}"/>
          <Label Content="Inspection Comment"
                 Style="{StaticResource ImageClickBlockTextStyle}" />
        </StackPanel>
      </Button>

      <!-- Remember -->
      <Border Grid.Row="9"
              Grid.Column="0"
              Margin="5,0,5,5"
              Style="{StaticResource BorderBlue}">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
          </Grid.ColumnDefinitions>

          <CheckBox Grid.Column="0"
                    Margin="5,0,0,0"
                    Content="Remember"
                    HorizontalContentAlignment="Center"
                    VerticalContentAlignment="Center"
                    Style="{StaticResource cbBase}"
                    IsChecked="{Binding IsRemembered}" />
          <Image Grid.Column="1"
                 Margin="5,2,5,2"
                 Height="40"
                 Source="/BDC_V1;component/Resources/Remember (1).png"
                 Width="35" />
        </Grid>
      </Border>

      <Border
          Grid.Row="7" Grid.Column="1" Grid.RowSpan="3" Grid.ColumnSpan="8"
          Style="{StaticResource BorderYO}">
        <TextBox
            VerticalContentAlignment="Top"
            HorizontalContentAlignment="Left"
            Background="LightYellow"
            Style="{StaticResource TextBoxWrap}"
            Text="{Binding InspectionInfo.InspectionComment}" />
      </Border>

      <!-- Photos -->
      <Button Grid.Row="11" Grid.Column="0"
              Style="{StaticResource PhotosBlockButtonStyle}"
              Command="{Binding CmdPhotosButton}">
        <StackPanel Style="{StaticResource ImageClickBlockPanelStyle}">
          <Image Source="/BDC_V1;component/Resources/Photos_cropped (1).png"
                 Style="{StaticResource ImageClickBlockImageStyle}"/>
          <Label Content="Photo(s)"
                 Style="{StaticResource ImageClickBlockTextStyle}" />
          <Label Content="{Binding ElementName=ImagesList, Path=Items.Count}"
                 Style="{StaticResource ImageClickBlockTextStyle}" />
        </StackPanel >
      </Button>

      <Border 
          Grid.Row="11"
          Grid.Column="1"
          Grid.ColumnSpan="8"
          Style="{StaticResource BorderYO}"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">
        <ItemsControl x:Name="ImagesList"
                prism:RegionManager.RegionName="InspectionItemControl" />
      </Border>

      <!-- Action Buttons -->
      <StackPanel
          Grid.Row="13" Grid.Column="0" Grid.ColumnSpan="4"
          Orientation="Horizontal"
          Grid.RowSpan="2">
        <Button
            Margin="0 0 5 0"
            Width="175"
            HorizontalContentAlignment="Left"
            Command="{Binding CmdCancelEdit}">
          <StackPanel Orientation="Horizontal">
            <Image Source="/BDC_V1;component/Resources/Cancel_Undo (1).png"
               Width="24"
               HorizontalAlignment="Left" />
            <Label Margin="0 -4 0 0"
               Content="Cancel Edit"
               HorizontalAlignment="Right" />
          </StackPanel>
        </Button>
        <Button
            Margin="5 0 0 0"
            Width="175"
            HorizontalContentAlignment="Left"
            Command="{Binding CmdDeleteInspection}">
          <StackPanel Orientation="Horizontal">
            <Image Source="/BDC_V1;component/Resources/Delete.png"
                HorizontalAlignment="Left" />
            <Label
                Margin="0 -2 0 0"
                Content="Delete Inspection"
                HorizontalAlignment="Right" />
          </StackPanel>
        </Button>
      </StackPanel>

    <Border 
            Grid.Row="11"
            Grid.Column="1"
            Grid.ColumnSpan="8"
            Style="{StaticResource BorderYO}"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch">
      <ItemsControl prism:RegionManager.RegionName="InspectionCommentItemControl" />
    </Border>

    <!-- Action Buttons -->
    <StackPanel Grid.Row="13"
                Grid.Column="0"
                Grid.ColumnSpan="4"
                Orientation="Horizontal"
                Grid.RowSpan="2">
      <Button Margin="0 0 5 0"
              Width="175"
              HorizontalContentAlignment="Left"
              Command="{Binding CmdCancelEdit}">
        <StackPanel Orientation="Horizontal">
          <Image Source="/BDC_V1;component/Resources/Cancel_Undo (1).png"
                 Height="24"
                 HorizontalAlignment="Left" />
          <Label Margin="0 -4 0 0"
                 Content="Cancel Edit"
                 HorizontalAlignment="Right" />
        </StackPanel>
      </Button>
      <Button Margin="5 0 0 0"
              Width="175"
              HorizontalContentAlignment="Left"
              Command="{Binding CmdDeleteInspection}">
        <StackPanel Orientation="Horizontal">
          <Image Source="/BDC_V1;component/Resources/Delete.png"
                 Height="24"
                 HorizontalAlignment="Left" />
          <Label Margin="0 -2 0 0"
                 Content="Delete InspectionComment"
                 HorizontalAlignment="Right" />
        </StackPanel>
      </Button>
    </StackPanel>

    </Grid>
  </ScrollViewer>

</UserControl>
